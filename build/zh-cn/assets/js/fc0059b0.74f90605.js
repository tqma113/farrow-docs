(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{111:function(e,n,r){"use strict";r.r(n),r.d(n,"frontMatter",(function(){return i})),r.d(n,"metadata",(function(){return c})),r.d(n,"toc",(function(){return p})),r.d(n,"default",(function(){return l}));var t=r(3),o=r(7),a=(r(0),r(116)),i={title:"farrow"},c={unversionedId:"api/02-farrow",id:"api/02-farrow",isDocsHomePage:!1,title:"farrow",description:"Useful modules for developing farrow app",source:"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/api/02-farrow.md",slug:"/api/02-farrow",permalink:"/farrow-docs/build/zh-cn/docs/api/02-farrow",editUrl:"https://github.com/Lucifier129/farrow-docs/docs/api/02-farrow.md",version:"current",sidebar:"docs",previous:{title:"create-farrow-app",permalink:"/farrow-docs/build/zh-cn/docs/api/01-create-farrow-app"},next:{title:"farrow-http",permalink:"/farrow-docs/build/zh-cn/docs/api/03-farrow-http"}},p=[{value:"Setup",id:"setup",children:[]},{value:"farrow.config.js",id:"farrowconfigjs",children:[{value:"Example",id:"example",children:[]},{value:"Type",id:"type",children:[]}]}],s={toc:p};function l(e){var n=e.components,r=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(t.a)({},s,r,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Useful modules for developing farrow app"),Object(a.b)("h2",{id:"setup"},"Setup"),Object(a.b)("p",null,"Install via npm or yarn"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},"# via npm\nnpm install --save farrow\n\n# via yarn\nyarn add farrow\n")),Object(a.b)("p",null,"add ",Object(a.b)("inlineCode",{parentName:"p"},"scripts")," to your ",Object(a.b)("inlineCode",{parentName:"p"},"package.json")),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-json"},'{\n  "scripts": {\n    "dev": "farrow dev",\n    "build": "farrow build",\n    "start": "farrow start"\n  }\n}\n')),Object(a.b)("p",null,"and then:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"npm run dev")," for developing"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"npm run build")," for bundling the source code"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"npm run start")," for runing the output code of bundler")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"farrow")," assumes that your source code is in ",Object(a.b)("inlineCode",{parentName:"p"},"src")," folder, and the output code is in ",Object(a.b)("inlineCode",{parentName:"p"},"dist")," folder."),Object(a.b)("h2",{id:"farrowconfigjs"},"farrow.config.js"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"farrow.config.js")," is used to configure the behaviour of ",Object(a.b)("inlineCode",{parentName:"p"},"farrow")),Object(a.b)("h3",{id:"example"},"Example"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-javascript"},"// farrow.config.js\nconst { createFarrowConfig } = require('farrow')\n\nmodule.exports = createFarrowConfig({\n  server: {\n    entry: 'index.js',\n    src: 'src',\n    dist: 'dist',\n    // uncomment next-line to debug\n    // nodeArgs: ['--inspect-brk']\n  },\n  // for connecting farrow-api-server and codegen farrow-api-client\n  // api: [\n  //   {\n  //     src: 'http://localhost:3002/api/todo',\n  //     dist: `${__dirname}/src/api/todo.ts`,\n  //   },\n  // ],\n})\n")),Object(a.b)("h3",{id:"type"},"Type"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-typescript"},"export type Config = {\n  server?: ServerBundlerOptions | ServerBundlerOptions[] | false\n  api?: ApiClientOptions | ApiClientOptions[] | false\n}\n\nexport type ServerBundlerOptions = {\n  /**\n   * filename of entry\n   */\n  entry?: string\n  /**\n   * folder of source code\n   */\n  src?: string\n  /**\n   * folder of output code\n   */\n  dist?: string\n  /**\n   * - args for node.js\n   * - eg. ['--inspect-brk'] for debugging\n   */\n  nodeArgs?: string[]\n  /**\n   * - env for node.js\n   * - eg. { NODE_ENV: 'production' }\n   * - NODE_ENV = production in `farrow start`\n   * - NODE_ENV = development in `farrow dev`\n   */\n  env?: NodeJS.ProcessEnv\n  /**\n   * other options for esbuild\n   */\n  esbuild?: Omit<BuildOptions, 'entryPoints' | 'outdir' | 'outbase'>\n  /**\n   * auto add closest package.json dependenties to esbuild external or not\n   */\n  autoExternal?: boolean\n}\n\nexport type ApiClientOptions = {\n  /**\n   * http address of farrow-api\n   */\n  src: string\n  /**\n   * file address of codegen target\n   */\n  dist: string\n  /**\n   * codegen options\n   */\n  codegen?: CodegenOptions\n  /**\n   * the interval of polling\n   * default value is 3000ms\n   */\n  pollingInterval?: number\n  /**\n   * logger options for polling\n   */\n  logger?: false | ((options: ApiClientOptions) => void)\n  /**\n   * transform source code received from server\n   * it's useful when need to attach custom code snippet\n   */\n  transform?: (source: string) => string\n  /**\n   * format source code via codegen\n   */\n  format?: (source: string) => string\n}\n\nexport type CodegenOptions = {\n  /**\n   * emit createApiClient or not\n   * if set to false, just types will be codegened\n   */\n  emitApiClient?: boolean\n}\n")))}l.isMDXComponent=!0},116:function(e,n,r){"use strict";r.d(n,"a",(function(){return u})),r.d(n,"b",(function(){return b}));var t=r(0),o=r.n(t);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?i(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function p(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=o.a.createContext({}),l=function(e){var n=o.a.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):c(c({},n),e)),r},u=function(e){var n=l(e.components);return o.a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},f=o.a.forwardRef((function(e,n){var r=e.components,t=e.mdxType,a=e.originalType,i=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=l(r),f=t,b=u["".concat(i,".").concat(f)]||u[f]||d[f]||a;return r?o.a.createElement(b,c(c({ref:n},s),{},{components:r})):o.a.createElement(b,c({ref:n},s))}));function b(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var a=r.length,i=new Array(a);i[0]=f;var c={};for(var p in n)hasOwnProperty.call(n,p)&&(c[p]=n[p]);c.originalType=e,c.mdxType="string"==typeof e?e:t,i[1]=c;for(var s=2;s<a;s++)i[s]=r[s];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,r)}f.displayName="MDXCreateElement"}}]);